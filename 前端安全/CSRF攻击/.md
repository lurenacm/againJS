[前端攻击之CSRF](https://juejin.cn/post/6844903689702866952#heading-14)

## CSRF 攻击
> CSRF 攻击(cross-site request forgery)是指，跨站请求伪造。所谓的跨站请求伪造是指，用户在 A网 上，点击了有恶意信息的 B网 页面，那么 B网 就会利用用户在 A网目前的登陆状态发起跨站请求攻击。
 
* 概括：诱导受害者进入第三方网站，在第三方网站中，向被攻击网站发送跨站请求 

### CSRF 攻击的三种方式
#### GET 请求
> 这里的 get 请求是用户登陆 A网 `http://bank.example/withdraw?user=10000&for=hacker` 会在本地留下 cookie 且没有退出 A 网，随后上登陆了恶意网站 B网，点击了 B网上面的一个 GET请求链接，比如一张图片 `<img src="http://bank.example/withdraw?user=10000&for=hacker">`，这个请求携带了用户的 `cookie` 信息，这样 B网 冒充受害者提交操作


#### POST 类型的 CSRF 
> 和 GET 请求一样，恶意网站 B，伪造了一个表单，你填写完后提交，这个 POST 请求照样会携带用户的 cookie，A 网的服务器接收后以为是用户的操作，造成被攻击

#### 链接类型的CSRF
> 这种类型的 CSRF 的攻击是，在 A 网站中的图片，或广告内含有恶意网站的链接，用夸张语句诱导用户点击，造成被攻击。

**CSRF攻击使用了服务器的检验漏洞和用户的登陆状态冒充用户的操作达到攻击的目的**


### CSRF 防止措施
* 利用好 cookie 的 SameSite属性，对携带的 cookie 做限制。
SameSite 的三个值 `strict` 禁止第三方请求携带 cookie，Lax 模式允许 get 请求携带 cookie，None 模式表示不允许任何网站请求会携带 cookie。
* 检验站点来源，使用请求头中的 `Origin 和 Referer`。`Origin`包含域名信息，`Referer` 包含了具体请求的 URL 路径。
* CSRF token。由服务器生成的 Token 作为客服端和服务器之间通信。






