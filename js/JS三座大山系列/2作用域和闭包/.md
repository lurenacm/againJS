### 变量提升机制
#### 一.什么是变量提升？
* 变量提升示例
``` js  
/* 你应该见过下面的类似代码，那你知道这是为什么*/
console.log(a)  // undefined
var a = 10
``` 
> 定义：变量提升是当栈内存作用域形成时，JS代码自上而下执行，浏览器会将带有`var, function`关键字的变量**提前**进行声明 declare(值默认就是 undefined)，定义 defined(就是赋值操作)，这种预先处理的机制就叫做变量提升机制。
在变量提升阶段：带 `var` 的只声明还没有被定义，带 `function` 的已经声明和定义。所以在代码执行前有带 `var` 的就提前声明，比如这里的 `a` 就赋值成 `undefined`，在代码执行过程中遇到`创建函数的代码`浏览器会直接跳过。
 
> 不考虑变量提升阶段的 js 运行机制相关参考[JS 运行机制基础版](https://juejin.cn/post/6926729456790798343)
#### 讲解示例
``` js
var a =12
var b = a
b = 1
function sum(x, y) {
    var total = x + y
    return total
}
sum(1, 2)
```
[代码运行流程图](./img/JS代码变量提升流程图.jpg)
> 函数在调用时创建执行上下文对象还有其他关键的步骤作用域创建，this指向等，这些内容放在后面讲

<img src="" width="500px" height="300px">

> 变量提升只发生在当前作用域。比如：在页面开始加载时，只有全局作用域发生变量提升，这时候的函数中存储的都是代码字符串。
 
 ### 带 var 和不带 var 的区别
* 全局作用域中不带`var`声明变量虽然也可以但是建议带上 `var`声明变量，不带 `var` 的相当于给window对象设置一个属性罢了。
* 私有作用域(函数作用域)，带 `var` 的是私有变量，不带 `var` 的是全局变量。
``` js
a = 12  // == window.a
console.log(a)  // 12
console.log(window.a) // 12

var a = b =12   // 这里的 b 也是不带 var 的。
/* 相当于*/
var a = 12;
b = 12
```
### 思考题
1. 问下面分别输出什么？
``` js
console.log(a, b)
var a =12, b =12
function foo(){
    console.log(a, b)
    var a =b =13
    console.log(a, b)
}
foo()
console.log(a, b)

/*
    undefined undefined
    undefined 12
    13 13
*/
```
2. 问下面的结果和上面的有何不同？
``` js
console.log(a, b)
var a =12, b =12
function foo(){
    console.log(a, b)
//  var a =b =13
    console.log(a, b)
}
foo()
console.log(a, b)

/*
   undefined undefined
    12 12
    12 12
*/
``` 
* 
* 4
* 5
* 6

### 变量提升面试题(含答案)
* 4

### this指向
> this: 全局执行环境默认为window，函数执行环境中，如果是对象调用则为该对象，如果是普通函数调用默认为window，strict下为null。