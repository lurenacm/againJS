> å‰è¨€ï¼šthis æ˜¯ JS ä¸­ä¸€ä¸ªç‰¹åˆ«é‡è¦çš„ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œthis éš¾å—ï¼Ÿå¥½åƒæŒºç®€å•çš„ã€‚çœ‹å®Œä¸‹é¢è¿™ä¸€ç¯‡æ–‡ç« ï¼Œè¿˜ä¸ä¼šçš„è¯ï¼Œä½ åˆ«æ¥æ‰¾æˆ‘ã€‚æ‰‹åŠ¨ç‹—å¤´ğŸ•ã€‚

## this çš„æŒ‡å‘
* __æ‰§è¡Œå‡½æ•°å‰æœ‰ `'.'` ç‚¹æ“ä½œç¬¦çš„è¯ï¼Œå‡½æ•°ä½“ä¸­çš„ `this` å°±æŒ‡å‘å‰é¢çš„å¯¹è±¡ï¼Œæ²¡æœ‰å°±æŒ‡å‘ `window`ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹æŒ‡å‘ `undefined`ã€‚è¿™å¥è¯ç‰¹åˆ«çš„é‡è¦ï¼Œè¯·è®°ä½__
* åŒ¿åè‡ªæ‰§è¡Œå‡½æ•°å‡½æ•°çš„ `this` æŒ‡å‘ `window`ã€‚
* æ„é€ å‡½æ•°çš„ `this` æŒ‡å‘å®ä¾‹æœ¬èº«ã€‚
* ç®­å¤´å‡½æ•°çš„ `this` æŒ‡å‘å¤–éƒ¨çš„ä½œç”¨åŸŸã€‚

>__å†æ¥çœ‹ä¸€ä¸‹è¿™å¥è¯ï¼šæ‰§è¡Œå‡½æ•°å‰æœ‰ `'.'` ç‚¹æ“ä½œç¬¦çš„è¯ï¼Œå‡½æ•°ä½“ä¸­çš„ `this` å°±æŒ‡å‘å‰é¢çš„å¯¹è±¡ï¼Œæ²¡æœ‰å°±æŒ‡å‘ `window`__

## æ™®é€šå‡½æ•° this çš„çƒ­èº«é¢˜
#### çƒ­èº«é¢˜ 1
``` js
var name = 'æ—ä¸€ä¸€'
function fn(){
    var name = 'æ—äºŒäºŒ'
    return this.name
}
fn()    // æ—ä¸€ä¸€
```
>æ‰§è¡Œå‡½æ•° `fn()`ï¼Œå‰é¢æ²¡æœ‰ `'.'` ç‚¹æ“ä½œç¬¦å§ï¼Œé‚£ä¹ˆè¿™é‡Œçš„ `this` å°±æŒ‡å‘ `window`ã€‚è¾“å‡ºçš„å°±æ˜¯å…¨å±€ä¸‹çš„ `name = 'æ—ä¸€ä¸€'`ã€‚

__å†æ¥çœ‹ä¸€ä¸‹è¿™å¥è¯ï¼šæ‰§è¡Œå‡½æ•°å‰æœ‰ `'.'` ç‚¹æ“ä½œç¬¦çš„è¯ï¼Œå‡½æ•°ä½“ä¸­çš„ `this` å°±æŒ‡å‘å‰é¢çš„å¯¹è±¡ï¼Œæ²¡æœ‰å°±æŒ‡å‘ `window`__

#### çƒ­èº«é¢˜ 2
``` js
var name = 'æ—äºŒäºŒ'
var obj = {
    name: 'æ—ä¸€ä¸€',
    fn: function () {
        return this.name
    }
}
console.log(obj.fn())   // 'æ—ä¸€ä¸€'
var fo = obj.fn
console.log(fo())       // 'æ—ä¸€ä¸€'     fo() ==> window.fo()
```
> `obj.fn()` ä¸­å‡½æ•° `fn()` å‰é¢æœ‰ `'.'` ç‚¹æ“ä½œç¬¦å§ï¼Œé‚£ä¹ˆè¿™é‡Œçš„ `this` å°±æŒ‡å‘ `obj` è¿™ä¸ªå¯¹è±¡ã€‚å†çœ‹æ‰§è¡Œå‡½æ•° `fo()`ï¼Œå‰é¢æ²¡æœ‰ `'.'` ç‚¹æ“ä½œç¬¦å§ï¼Œé‚£ä¹ˆè¿™é‡Œçš„ `this` å°±æŒ‡å‘ `window`ã€‚å…¶å®ä¸Šé¢çš„å‡½æ•° `fo() ==> window.fo()`ï¼Œæ‰€ä»¥æ‰§è¡Œå‡½æ•° `fo()` å‰é¢ä¹Ÿæ˜¯å¯ä»¥çœ‹ä½œæ˜¯æœ‰ `'.'` æ“ä½œç¬¦çš„ã€‚

__å†æ¥çœ‹ä¸€ä¸‹è¿™å¥è¯ï¼šæ‰§è¡Œå‡½æ•°å‰æœ‰ `'.'` ç‚¹æ“ä½œç¬¦çš„è¯ï¼Œå‡½æ•°ä½“ä¸­çš„ `this` å°±æŒ‡å‘å‰é¢çš„å¯¹è±¡ï¼Œæ²¡æœ‰å°±æŒ‡å‘ `window`__
#### çƒ­èº«é¢˜ 3ï¼Œä¿®æ”¹ä¸€ä¸‹çƒ­èº«é¢˜ 2
``` js
var name = 'æ—äºŒäºŒ'
var obj = {
    name: 'æ—ä¸€ä¸€',
    fn: function () {
        var name = 'å°ä¸‰',
        return function(){
             return this.name
        }
    }
}
console.log(obj.fn()())   // æ—äºŒäºŒ
var fo = obj.fn()
console.log(fo())    // æ—äºŒäºŒ
```
> çƒ­èº«3å’Œçƒ­èº«2å·®ä¸å¤šï¼Œ`obj.fn()()` ä¸­ `obj.fn()`æ‰§è¡Œå®Œåæœ‰ä¸€ä¸ªå‡½æ•°(è¿™é‡Œç§°ä¸ºå‡½æ•° `A`)è¿”å›ï¼Œæœ€åç›¸å½“äºæ‰§è¡Œå‡½æ•° `A()`ï¼Œ `A()` å‰é¢æ²¡æœ‰ `'.'` ç‚¹æ“ä½œç¬¦å§ï¼Œé‚£ä¹ˆè¿™é‡Œçš„ `this` å°±æŒ‡å‘ `window`ï¼Œè¾“å‡ºå°±æ˜¯ `æ—äºŒäºŒ` äº†ã€‚ä¸Šé¢çš„ `fo()` å‡½æ•°åŒç†ã€‚

#### çƒ­èº«é¢˜ 4ï¼Œæœ‰ç‚¹å°å‘
__å†æ¥çœ‹ä¸€ä¸‹è¿™å¥è¯ï¼šæ‰§è¡Œå‡½æ•°å‰æœ‰ `'.'` ç‚¹æ“ä½œç¬¦çš„è¯ï¼Œå‡½æ•°ä½“ä¸­çš„ `this` å°±æŒ‡å‘å‰é¢çš„å¯¹è±¡ï¼Œæ²¡æœ‰å°±æŒ‡å‘ `window`__
``` js
var name = 'æ—ä¸€ä¸€'
var obj = {
    name : 'äºŒäºŒ',
    callback: function(){
        console.log(this.name)
    }
}

setTimeout(obj.callback,1000)
/* è¾“å‡º
*   æ—ä¸€ä¸€
*/
```
> 
#### çƒ­èº«5ï¼Œè¿˜æ˜¯æœ‰ç‚¹å°å‘
``` js
function Foo() {
    getName = function (){
        console.log(1)
    }
    return this
}

Foo.getName = function () {
    console.log(2)
}

function getName() {
    console.log(5)
}
```

## è‡ªæ‰§è¡Œå‡½æ•°
#### çƒ­èº«é¢˜
``` js

```

## æ„é€ å‡½æ•° this çš„çƒ­èº«é¢˜
__æ¥è¯»ä¸€ä¸‹è¿™å¥è¯ï¼šæ„é€ å‡½æ•°çš„ `this` æŒ‡å‘å®ä¾‹æœ¬èº«__
>å…³äºæ„é€ å‡½æ•°çš„ `this` ä¸ºä»€ä¹ˆæŒ‡å‘å®ä¾‹æ˜¯æµè§ˆå™¨æŒ‡å®šçš„ï¼Œè¯¦æƒ…çœ‹ `new` è¿™ä¸ªè¿‡ç¨‹å‘ç”Ÿäº†ä»€ä¹ˆ [é¢è¯• | ä½ ä¸å¾—ä¸æ‡‚å¾— JS åŸå‹å’ŒåŸå‹é“¾](https://juejin.cn/post/6938590449674223624#heading-6)
#### çƒ­èº«é¢˜ 1
``` js
function Fn(){
    var n = 0
    this.name = 'æ—ä¸€ä¸€'
    this.age = 18
    this.getName = function(){
        return this.name
    }
}

Fn.prototype.getAge = function(){
    return this.age
}

Fn.x = 'æ—äºŒäºŒ'

var f = new Fn()
console.log(f.name)     // æ—ä¸€ä¸€
console.log(f.getName())     // æ—ä¸€ä¸€
console.log(f.getAge())        // 18
console.log(f.n)    // undefined
console.log(f.x)    // undefined
```
> ä¸Šé¢çš„ `Fn` ç»è¿‡ `new`åå°±æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œ`this` å°±æŒ‡å‘å®ä¾‹ `f`ã€‚æ‰€ä»¥ä¸Šé¢çš„1ï¼Œ2è¾“å‡ºéƒ½æ˜¯`æ—ä¸€ä¸€`ã€‚`f.getAge()` æ˜¯å®ä¾‹ `f` è°ƒç”¨äº†`getAge` è¾“å‡ºå°±æ˜¯ 18ï¼Œé—®ï¼šå®ä¾‹ `f` ä¸­å¹¶æ²¡æœ‰å±æ€§ `getAge` æ˜¯æ€ä¹ˆè¾“å‡º 18çš„ï¼Œ`f.x` è¾“å‡ºåˆä¸ºä»€ä¹ˆæ˜¯ `undefined` ï¼Ÿç­”ï¼šè¿™æ˜¯åŸå‹é“¾çš„æŸ¥æ‰¾æœºåˆ¶ï¼Œå±æ€§ `x` ä¸æ˜¯åœ¨åŸå‹ `prototype` ä¸Šçš„å°±ä¸æ˜¯å®ä¾‹çš„å±æ€§ï¼Œå¯ä»¥è¯»ä¸€ä¸‹è¿™ç¯‡æ–‡ç«  [é¢è¯• | ä½ ä¸å¾—ä¸æ‡‚å¾— JS åŸå‹å’ŒåŸå‹é“¾](https://juejin.cn/post/6938590449674223624)ï¼›é—®ï¼šä¸ºä»€ä¹ˆ`f.n` è¾“å‡ºçš„æ˜¯ `undefined`ã€‚å› ä¸ºå˜é‡ `n` æ˜¯æ„é€ å‡½æ•°çš„ç§æœ‰å˜é‡å’Œ `new` åˆ›å»ºçš„å®ä¾‹æ²¡æœ‰å…³ç³»ã€‚

## æ€è€ƒé¢˜
### 1. ç¬”è¯•é¢˜ this æŒ‡å‘é—®é¢˜
``` js
var name = 'æ—ä¸€ä¸€'
var obj = {
    name: 'æ—äºŒäºŒ',
    show: function (){
        console.log(this.name)
    },
    wait: function () {
        var fn = this.show
        fn()
    }
    
}
obj.wait()  //  æ—ä¸€ä¸€
```
> `obj.wait()` ä¸­ï¼Œæ‰§è¡Œå‡½æ•° `wait()` å‰é¢æœ‰ `'.'` ç‚¹æ“ä½œç¬¦å§ï¼Œé‚£ä¹ˆè¿™é‡Œçš„ `this` å°±æŒ‡å‘ `obj` è¿™ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥`this.show ==> obj.show`ã€‚å†çœ‹æ‰§è¡Œå‡½æ•° `fn()` å‰é¢æ²¡æœ‰ `'.'` ç‚¹æ“ä½œç¬¦å§ï¼Œé‚£ä¹ˆè¿™é‡Œçš„ `this` å°±æŒ‡å‘ `window`ï¼Œè¾“å‡ºå°±æ˜¯ `æ—ä¸€ä¸€`ã€‚

### 2. å’Œé—­åŒ…æœ‰å…³çš„ this æŒ‡å‘é—®é¢˜
``` js
var n = 2 // -> 4 -> 8
var obj = {
    n: 3,    // 6
    fn: (function(n){
        n*=2
        this.n+=2    // window ä¸‹çš„ n å˜æˆ 4
        var n = 5    // è¿™ä¸€æ­¥ä¸ä¼šå†é‡æ–°å£°æ˜ï¼Œå› ä¸ºå·²ç»å‚æ•°èµ‹å€¼ï¼Œå°±ä¸ä¼šå†å£°æ˜è€Œæ˜¯ç›´æ¥èµ‹å€¼ n = 5
        console.log("window.n", window.n)
        return function (m) {
            console.log("n:", n, "m", m)    // n:5  m:3  è¿™é‡Œçš„ n å‘ä¸ŠæŸ¥æ‰¾æ˜¯ 5   // 
            this.n*=2    // fn(3): 2 * 4 =8  //  obj.fn(3): 2 * 3 = 6 
            console.log(m + (++n))    // 3 + (++5) ++n å¯¼è‡´ä¸Šçº§ä½œç”¨åŸŸçš„nå˜æˆäº†6    // 3 + (++6)
        } 
    })(n)
}

var fn = obj.fn;
fn(3)    // 9
obj.fn(3)    // 10
console.log(n, obj.n)    // 8 6
/* è¾“å‡º
* 9
* 10
* 8  6
/
```